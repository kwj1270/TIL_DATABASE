테이블 작성 삭제 변경
=======================
우선 맛보기 구조를 보자  
```
CREATE TABLE 테이블명(생성할 구조);  
DROP TABLE 테이블명;  
ALTER TABLE 테이블명 하부명령;  
```
  
```CREATE```는 테이블 생성을 의미    
```DELETE```는 테이블 삭제를 의미    
``` ALTER```는 테이블 수정을 의미    
   
위의 명령어들은 ```DDL```이다.  
데이터를 정의하는 명령으로 스키마 내의 객체를 관리할 때 사용된다.    
그리고 트랜잭션을 사용하지 않으므로 바로 처리가 되니 사용시 주의하자  

참고로 팁으로 ```DDL```은 모두 같은 문법을 사용한다.   
```
OOOO TABLE 테이블 명 ...
OOOO VIEW 뷰 명 ...
OOOO INDEX 인덱스 명 ...
```
  
# 1. CREATE 테이블 작성
**구조**
```
CREATE TABLE 테이블명(
  열 정의1,
  열 정의2,
  ...
);  
```
열 정의는 자신이 사용할 필드와 해당하는 자료형 그리고 제약등을 넣는 것이다.  
  
**열 정의**
```
열명 자료형 [DEFAULT 기본값] [NULL / NOT NULL] 
```
참고로 ```[PRIMARY KEY]```나 ```AUTO_INCREMENT```, ```UNIQUE```도 있다.  
열정의를 할 때는 사용할 열과 자료형 그리고 제약이 유효한지 판단하고 작성하자.  
이제 사용 예시를 보자  
  
**예시**
```
CREATE TABLE mytable(
  no INTEGER NOT NULL,
  a VARCHAR(30) NULL,
  b DATE,
);

DESC mytable;     ->     잘 작성 되었는지 구조를 확인하자
```
  
***
# 2. DROP 테이블 삭제
필요 없는 테이블은 ```DROP TABLE```명령어로 삭제를 한다.  
단 ```DELETE```처럼 구조를 남기는 것이 아니라 테이블 자체를 삭제하며  
트랜잭션을 사용하지 않으니 바로 삭제된다. 유념하고 사용하자.   
  
**구조**
```
DROP TABLE 테이블명;
```
**예시**
```
DROP TABLE delete_mytable;
```
  
## 2.1. 데이터행 삭제
테이블 자체가 아니라 테이블 구조를 남기고 데이터만 삭제하는 명령어가 있다.  
```DELETE```가 아니냐고 생각할 수 있지만 훨씬 빠른 ```TURNCATE```가 있다.  
  
**구조**
```
TURNCATE TABLE 테이블명;
```
```TURNCATE```는 DDL 명령어로 트랜잭션을 사용하지 않아서 ```DELETE```보다 작업 속도가 빠르다.  
또한 DDL이므로 ```WHERE 구```를 지정할 수 없으니 모든 행을 삭제할 때 사용하자.   

***
# 3. 테이블 변경
테이블을 작성한뒤에도 테이블 구조에 대한 변경은 ```ALTER TABLE```을 통해 얼마든지 가능하다.    
  
**구조**
```
ALTER TABLE 테이블명 변경명령
```
변경명령이란 ```ALTER```가 사용할 수 있는 명령들을 의미하는 것으로 아래와 같이 사용할 수 있다.
* 열 
  * 추가
  * 삭제
  * 변경
* 제약
  * 추가
  * 삭제  

## 3.1. ADD 열 추가
**구조**
```
ALTER TABLE ADD 열 정의
```
기존 테이블에 새로운 필드(열)을 추가하고자 할 때 사용하며    
사용 방법은 ```CREATE``` 때와 동일하다.   
   
물론 이름이 중복되면 추가할 수 없으며    
이렇게 열이 추가될 경우 기존에 존재하던 데이터는 ```NULL``` 값을 가진다.    
그래서 만약 ```NOT NULL```로 추가하고 싶다면 DEFAULT 값을 넣어주는 것이 좋고  
```NULL```로 추가하고 싶으면 추가하되 ```INSERT```로 값을 넣어주도록 하자.  
    
만약 필드의 순서에 맞춰서 넣고 싶다면  
제일뒤에 ```FIRST``` 또는 ```AFTER 열이름```을 지정하면 된다.   
  
## 3.2. MODIFY 와 CHANGE 열 속성 변경
두가지 방법이 있는데  
  
1. MODIFY : 기존의 필드 이름을 사용하면서 필드 속성 바꾸기
2. CHANGE : 새로운 필드 이름을 사용하면서 필드 속성 바꾸기  

이렇게 나뉘어 진다.

### 3.2.1. MODIFY
**구조**
```
ALTER TABLE 테이블명 MODIFY 열이름 열정의
```
열 정의는 ```CREATE ``` 때와 동일하다.
다만 ```MODIFY```는 열 이름을 변경할 수 없다.
  
**중요**  
변경되는 필드에 대하여 데이터(행)가 존재하는 경우 속성 변경에 따라 데이터 역시 변환된다.  
이때 만약 자료형이 변경되도 테이블에 들어간 데이터의 자료형 역시 바뀐다.  
이때 변경이 되지 않는 경우 에러를 발생하며 ```ALTER TABLE``` 명령은 실행되지 않는다.  
그러니 저장된 값을 확인하고 바꾸자  
  
**예시**
```
ALTER TABLE mytable MODIFY col VARCHAR(20);
```
실무에서는 주로 ```VARCHAR()```길이를 변경할때 많이 사용한다고 한다.  
  
### 3.2.2. CHANGE
**구조**
```
ALTER TABLE 테이블명 CHANGE 기존열이름 새로운열이름 열정의  
```
```CHANGE```는 ```MODIFY```와 다르게 이름까지 바꿀수 있다.    
**Oracle**에서는 ```RENAME TO```로 사용해야 한다.  
   
**예시**
```
ALTER TABLE mytable CHANGE col newcol VARCHAR(20);
```
  
### 3.3. DROP 열 삭제
```ALTER TABLE```로 열을 삭제할 때는 ```DROP 하부명령```을 사용한다.
  
**구조**
```
ALTER TABLE 테이블명 DROP 열명
```
```DROP``` 뒤에는 삭제하고 싶은 열명을 지정한다.  
물론 테이블이 존재하지 않는 경우 에러가 발생한다.  
  
***
# 4. ALTER TABLE로 테이블 관리
이번에는 책에서 소개한 실무에서 사용하는 경우를 보여준다.  
막 거창한 것이 아닌 정말 간단한 예시만 사용했으며 단지 이런 간단한 예시라도  
생각해야할 부분을 알려준다고 생각하면 된다.  

## 4.1. 최대길이 연장
대규모 데이터베이스에서는 데이터의 크기가 매우 커지는 경향이 있다.  
특히 행 개수가 많은 테이블에서는 데이터 하나의 크기를 최적화하는 것만으로도 저장 공간을 절약할 수 있다.   
실제로 시스템을 운용하다 보면 처음에는 한 자리로 충분했던 용량이 시간이 지나면 부족할 수 있다.  
이럴 때 앞서 배운 ```MODIFY```를 이용한다.
```
원래 col은 VARCHAR(20)을 기준으로 

ALTER TABLE mytable MODIFY col VARCHAR(30);
```
위 예제를 통해 저장공간을 늘릴수 있다는 것을 배웠다.  
그럼 저장공간을 줄일 수 있는가?  
아쉽지만 ```ALTER```에서는 기존 행에 존재하는 데이터의 길이보다 작게 지정할 수는 없다.  
작게 지정할 경우 데이터의 일부가 잘려나가므로 에러가 발생하기 때문이다.  
  
## 4.2. 열 추가  
테이블에 열을 추가하는 일은 자주 일어난다.  
시스템의 기능 확장 등 이유는 여러 가지가 있는데, 이때 사용하는 ALTER TABLE 명령은 다음과 같다.
```
ALTER TABLE mytable ADD new_col INTEGER
```
하지만 이렇게 열을 추가하는 정도로는 시스템 쪽에 미치는 영향이 적을 것 같지만, 
테이블 정의가 바뀌어버리는 일인 만큼 꽤 영향을 준다.  
  
**중요**  
적어도, 변경한 테이블에 행을 추가하는 INSERT 명령은 확인해야 한다.  
열을 추가하면 해당 열에 대한 데이터 값을 지정해주어야 하기 때문이다.(보통은 NULL이기 때문에)  
물론 DEFAUT를 이용했다면 기본값이 들어가겠지만  
값이 들어갔던 안들어 갔던 일단 한번 테이블을 확인하는 것이 좋다.
  
또한 데이터베이스를 이용한 프로그래밍 언어에서 ```DAO```의 변경점을 확인하고 수정하자.  
(예를 들면 INSERT시 열의 개수라던가)
